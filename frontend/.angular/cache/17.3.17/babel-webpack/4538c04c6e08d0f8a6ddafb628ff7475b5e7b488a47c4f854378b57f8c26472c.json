{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ChatListComponent = class ChatListComponent {\n  constructor(chatService, router) {\n    this.chatService = chatService;\n    this.router = router;\n    this.chats = [];\n    this.isLoading = false;\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    this.loadChats();\n  }\n  loadChats() {\n    this.isLoading = true;\n    this.errorMessage = '';\n    this.chatService.getChats().subscribe({\n      next: chats => {\n        this.chats = chats;\n        this.isLoading = false;\n      },\n      error: error => {\n        this.errorMessage = 'Failed to load conversations. Please try again.';\n        this.isLoading = false;\n      }\n    });\n  }\n  openChat(chatId) {\n    this.router.navigate(['/chat', chatId]);\n  }\n  getParticipantName(chat) {\n    return chat.participants[0]?.name || 'Unknown';\n  }\n  getParticipantImage(chat) {\n    return chat.participants[0]?.profileImage || 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100';\n  }\n  isOnline(chat) {\n    // Mock online status - in real app, this would come from WebSocket\n    return Math.random() > 0.5;\n  }\n  formatTime(timestamp) {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n    if (minutes < 60) {\n      return `${minutes}m ago`;\n    } else if (hours < 24) {\n      return `${hours}h ago`;\n    } else {\n      return `${days}d ago`;\n    }\n  }\n  goToMatches() {\n    this.router.navigate(['/matches']);\n  }\n};\nChatListComponent = __decorate([Component({\n  selector: 'app-chat-list',\n  template: `\n    <div class=\"chat-list-container\">\n      <div class=\"chat-header\">\n        <h1>Messages</h1>\n        <div class=\"chat-stats\">\n          <span class=\"stat\">{{ chats.length }} conversations</span>\n        </div>\n      </div>\n\n      <div class=\"chat-list\" *ngIf=\"chats.length > 0\">\n        <div \n          *ngFor=\"let chat of chats\" \n          class=\"chat-item\"\n          (click)=\"openChat(chat.id)\"\n        >\n          <div class=\"chat-avatar\">\n            <img \n              [src]=\"getParticipantImage(chat)\" \n              [alt]=\"getParticipantName(chat)\"\n            >\n            <div class=\"online-indicator\" *ngIf=\"isOnline(chat)\"></div>\n          </div>\n\n          <div class=\"chat-content\">\n            <div class=\"chat-header-info\">\n              <h3 class=\"participant-name\">{{ getParticipantName(chat) }}</h3>\n              <span class=\"last-message-time\" *ngIf=\"chat.lastMessage\">\n                {{ formatTime(chat.lastMessage.timestamp) }}\n              </span>\n            </div>\n            \n            <p class=\"last-message\" *ngIf=\"chat.lastMessage\">\n              {{ chat.lastMessage.content }}\n            </p>\n            \n            <div class=\"chat-meta\">\n              <span class=\"unread-count\" *ngIf=\"chat.unreadCount > 0\">\n                {{ chat.unreadCount }}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"no-chats\" *ngIf=\"chats.length === 0 && !isLoading\">\n        <div class=\"no-chats-content\">\n          <h2>No conversations yet</h2>\n          <p>Start swiping to find your matches!</p>\n          <button class=\"btn btn-primary\" (click)=\"goToMatches()\">\n            Find Matches\n          </button>\n        </div>\n      </div>\n\n      <div class=\"loading\" *ngIf=\"isLoading\">\n        <div class=\"loading-spinner\"></div>\n        <p>Loading conversations...</p>\n      </div>\n\n      <div class=\"error-message\" *ngIf=\"errorMessage\">\n        {{ errorMessage }}\n      </div>\n    </div>\n  `,\n  styles: [`\n    .chat-list-container {\n      max-width: 800px;\n      margin: 0 auto;\n      padding: 2rem;\n    }\n\n    .chat-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 2rem;\n    }\n\n    .chat-header h1 {\n      color: white;\n      font-size: 2.5rem;\n    }\n\n    .chat-stats .stat {\n      background: rgba(255, 255, 255, 0.1);\n      padding: 0.5rem 1rem;\n      border-radius: 20px;\n      color: white;\n      font-size: 0.9rem;\n    }\n\n    .chat-list {\n      background: white;\n      border-radius: 20px;\n      overflow: hidden;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n    }\n\n    .chat-item {\n      display: flex;\n      align-items: center;\n      padding: 1.5rem;\n      border-bottom: 1px solid #e9ecef;\n      cursor: pointer;\n      transition: background-color 0.3s ease;\n    }\n\n    .chat-item:hover {\n      background: #f8f9fa;\n    }\n\n    .chat-item:last-child {\n      border-bottom: none;\n    }\n\n    .chat-avatar {\n      position: relative;\n      margin-right: 1rem;\n    }\n\n    .chat-avatar img {\n      width: 60px;\n      height: 60px;\n      border-radius: 50%;\n      object-fit: cover;\n    }\n\n    .online-indicator {\n      position: absolute;\n      bottom: 2px;\n      right: 2px;\n      width: 16px;\n      height: 16px;\n      background: #28a745;\n      border: 3px solid white;\n      border-radius: 50%;\n    }\n\n    .chat-content {\n      flex: 1;\n      min-width: 0;\n    }\n\n    .chat-header-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 0.5rem;\n    }\n\n    .participant-name {\n      font-size: 1.1rem;\n      font-weight: 600;\n      color: #333;\n      margin: 0;\n    }\n\n    .last-message-time {\n      font-size: 0.8rem;\n      color: #6c757d;\n    }\n\n    .last-message {\n      color: #6c757d;\n      font-size: 0.9rem;\n      margin: 0;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .chat-meta {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 0.5rem;\n    }\n\n    .unread-count {\n      background: #ff6b6b;\n      color: white;\n      padding: 0.25rem 0.75rem;\n      border-radius: 15px;\n      font-size: 0.8rem;\n      font-weight: 600;\n    }\n\n    .no-chats {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      min-height: 400px;\n    }\n\n    .no-chats-content {\n      text-align: center;\n      background: white;\n      padding: 3rem;\n      border-radius: 20px;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n    }\n\n    .no-chats-content h2 {\n      color: #667eea;\n      margin-bottom: 1rem;\n    }\n\n    .loading {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      min-height: 400px;\n      color: white;\n    }\n\n    .loading-spinner {\n      width: 50px;\n      height: 50px;\n      border: 4px solid rgba(255, 255, 255, 0.3);\n      border-top: 4px solid white;\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n      margin-bottom: 1rem;\n    }\n\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n\n    .error-message {\n      background: #f8d7da;\n      color: #721c24;\n      padding: 1rem;\n      border-radius: 8px;\n      text-align: center;\n    }\n  `]\n})], ChatListComponent);\nexport { ChatListComponent };","map":{"version":3,"names":["Component","ChatListComponent","constructor","chatService","router","chats","isLoading","errorMessage","ngOnInit","loadChats","getChats","subscribe","next","error","openChat","chatId","navigate","getParticipantName","chat","participants","name","getParticipantImage","profileImage","isOnline","Math","random","formatTime","timestamp","date","Date","now","diff","getTime","minutes","floor","hours","days","goToMatches","__decorate","selector","template","styles"],"sources":["C:\\Users\\super\\Project3KUDatingApp\\frontend\\src\\app\\modules\\chat\\components\\chat-list\\chat-list.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ChatService, Chat } from '../../services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-list',\r\n  template: `\r\n    <div class=\"chat-list-container\">\r\n      <div class=\"chat-header\">\r\n        <h1>Messages</h1>\r\n        <div class=\"chat-stats\">\r\n          <span class=\"stat\">{{ chats.length }} conversations</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"chat-list\" *ngIf=\"chats.length > 0\">\r\n        <div \r\n          *ngFor=\"let chat of chats\" \r\n          class=\"chat-item\"\r\n          (click)=\"openChat(chat.id)\"\r\n        >\r\n          <div class=\"chat-avatar\">\r\n            <img \r\n              [src]=\"getParticipantImage(chat)\" \r\n              [alt]=\"getParticipantName(chat)\"\r\n            >\r\n            <div class=\"online-indicator\" *ngIf=\"isOnline(chat)\"></div>\r\n          </div>\r\n\r\n          <div class=\"chat-content\">\r\n            <div class=\"chat-header-info\">\r\n              <h3 class=\"participant-name\">{{ getParticipantName(chat) }}</h3>\r\n              <span class=\"last-message-time\" *ngIf=\"chat.lastMessage\">\r\n                {{ formatTime(chat.lastMessage.timestamp) }}\r\n              </span>\r\n            </div>\r\n            \r\n            <p class=\"last-message\" *ngIf=\"chat.lastMessage\">\r\n              {{ chat.lastMessage.content }}\r\n            </p>\r\n            \r\n            <div class=\"chat-meta\">\r\n              <span class=\"unread-count\" *ngIf=\"chat.unreadCount > 0\">\r\n                {{ chat.unreadCount }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"no-chats\" *ngIf=\"chats.length === 0 && !isLoading\">\r\n        <div class=\"no-chats-content\">\r\n          <h2>No conversations yet</h2>\r\n          <p>Start swiping to find your matches!</p>\r\n          <button class=\"btn btn-primary\" (click)=\"goToMatches()\">\r\n            Find Matches\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"loading\" *ngIf=\"isLoading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <p>Loading conversations...</p>\r\n      </div>\r\n\r\n      <div class=\"error-message\" *ngIf=\"errorMessage\">\r\n        {{ errorMessage }}\r\n      </div>\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    .chat-list-container {\r\n      max-width: 800px;\r\n      margin: 0 auto;\r\n      padding: 2rem;\r\n    }\r\n\r\n    .chat-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      margin-bottom: 2rem;\r\n    }\r\n\r\n    .chat-header h1 {\r\n      color: white;\r\n      font-size: 2.5rem;\r\n    }\r\n\r\n    .chat-stats .stat {\r\n      background: rgba(255, 255, 255, 0.1);\r\n      padding: 0.5rem 1rem;\r\n      border-radius: 20px;\r\n      color: white;\r\n      font-size: 0.9rem;\r\n    }\r\n\r\n    .chat-list {\r\n      background: white;\r\n      border-radius: 20px;\r\n      overflow: hidden;\r\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\r\n    }\r\n\r\n    .chat-item {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 1.5rem;\r\n      border-bottom: 1px solid #e9ecef;\r\n      cursor: pointer;\r\n      transition: background-color 0.3s ease;\r\n    }\r\n\r\n    .chat-item:hover {\r\n      background: #f8f9fa;\r\n    }\r\n\r\n    .chat-item:last-child {\r\n      border-bottom: none;\r\n    }\r\n\r\n    .chat-avatar {\r\n      position: relative;\r\n      margin-right: 1rem;\r\n    }\r\n\r\n    .chat-avatar img {\r\n      width: 60px;\r\n      height: 60px;\r\n      border-radius: 50%;\r\n      object-fit: cover;\r\n    }\r\n\r\n    .online-indicator {\r\n      position: absolute;\r\n      bottom: 2px;\r\n      right: 2px;\r\n      width: 16px;\r\n      height: 16px;\r\n      background: #28a745;\r\n      border: 3px solid white;\r\n      border-radius: 50%;\r\n    }\r\n\r\n    .chat-content {\r\n      flex: 1;\r\n      min-width: 0;\r\n    }\r\n\r\n    .chat-header-info {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      margin-bottom: 0.5rem;\r\n    }\r\n\r\n    .participant-name {\r\n      font-size: 1.1rem;\r\n      font-weight: 600;\r\n      color: #333;\r\n      margin: 0;\r\n    }\r\n\r\n    .last-message-time {\r\n      font-size: 0.8rem;\r\n      color: #6c757d;\r\n    }\r\n\r\n    .last-message {\r\n      color: #6c757d;\r\n      font-size: 0.9rem;\r\n      margin: 0;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .chat-meta {\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      margin-top: 0.5rem;\r\n    }\r\n\r\n    .unread-count {\r\n      background: #ff6b6b;\r\n      color: white;\r\n      padding: 0.25rem 0.75rem;\r\n      border-radius: 15px;\r\n      font-size: 0.8rem;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .no-chats {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      min-height: 400px;\r\n    }\r\n\r\n    .no-chats-content {\r\n      text-align: center;\r\n      background: white;\r\n      padding: 3rem;\r\n      border-radius: 20px;\r\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\r\n    }\r\n\r\n    .no-chats-content h2 {\r\n      color: #667eea;\r\n      margin-bottom: 1rem;\r\n    }\r\n\r\n    .loading {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n      min-height: 400px;\r\n      color: white;\r\n    }\r\n\r\n    .loading-spinner {\r\n      width: 50px;\r\n      height: 50px;\r\n      border: 4px solid rgba(255, 255, 255, 0.3);\r\n      border-top: 4px solid white;\r\n      border-radius: 50%;\r\n      animation: spin 1s linear infinite;\r\n      margin-bottom: 1rem;\r\n    }\r\n\r\n    @keyframes spin {\r\n      0% { transform: rotate(0deg); }\r\n      100% { transform: rotate(360deg); }\r\n    }\r\n\r\n    .error-message {\r\n      background: #f8d7da;\r\n      color: #721c24;\r\n      padding: 1rem;\r\n      border-radius: 8px;\r\n      text-align: center;\r\n    }\r\n  `]\r\n})\r\nexport class ChatListComponent implements OnInit {\r\n  chats: Chat[] = [];\r\n  isLoading = false;\r\n  errorMessage = '';\r\n\r\n  constructor(\r\n    private chatService: ChatService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.loadChats();\r\n  }\r\n\r\n  loadChats() {\r\n    this.isLoading = true;\r\n    this.errorMessage = '';\r\n\r\n    this.chatService.getChats().subscribe({\r\n      next: (chats: any) => {\r\n        this.chats = chats;\r\n        this.isLoading = false;\r\n      },\r\n      error: (error: any) => {\r\n        this.errorMessage = 'Failed to load conversations. Please try again.';\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  openChat(chatId: number) {\r\n    this.router.navigate(['/chat', chatId]);\r\n  }\r\n\r\n  getParticipantName(chat: Chat): string {\r\n    return chat.participants[0]?.name || 'Unknown';\r\n  }\r\n\r\n  getParticipantImage(chat: Chat): string {\r\n    return chat.participants[0]?.profileImage || 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100';\r\n  }\r\n\r\n  isOnline(chat: Chat): boolean {\r\n    // Mock online status - in real app, this would come from WebSocket\r\n    return Math.random() > 0.5;\r\n  }\r\n\r\n  formatTime(timestamp: Date): string {\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const diff = now.getTime() - date.getTime();\r\n    const minutes = Math.floor(diff / 60000);\r\n    const hours = Math.floor(diff / 3600000);\r\n    const days = Math.floor(diff / 86400000);\r\n\r\n    if (minutes < 60) {\r\n      return `${minutes}m ago`;\r\n    } else if (hours < 24) {\r\n      return `${hours}h ago`;\r\n    } else {\r\n      return `${days}d ago`;\r\n    }\r\n  }\r\n\r\n  goToMatches() {\r\n    this.router.navigate(['/matches']);\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}