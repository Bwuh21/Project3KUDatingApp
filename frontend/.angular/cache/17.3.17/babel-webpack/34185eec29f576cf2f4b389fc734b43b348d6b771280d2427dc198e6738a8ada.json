{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet MfaComponent = class MfaComponent {\n  constructor(fb, authService, router) {\n    this.fb = fb;\n    this.authService = authService;\n    this.router = router;\n    this.isLoading = false;\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.email = '';\n    this.mfaForm = this.fb.group({\n      code: ['', [Validators.required, Validators.minLength(6), Validators.maxLength(6)]]\n    });\n    // Get email from state or localStorage\n    this.email = localStorage.getItem('pending_email') || '';\n    if (!this.email) {\n      this.router.navigate(['/login']);\n    }\n  }\n  onSubmit() {\n    if (this.mfaForm.valid) {\n      this.isLoading = true;\n      this.errorMessage = '';\n      this.authService.verifyMFACode(this.email, this.mfaForm.value.code).subscribe({\n        next: response => {\n          this.isLoading = false;\n          localStorage.removeItem('pending_email');\n          this.router.navigate(['/matches']);\n        },\n        error: error => {\n          this.isLoading = false;\n          this.errorMessage = error.error?.message || 'Invalid verification code. Please try again.';\n        }\n      });\n    }\n  }\n  resendCode() {\n    this.authService.sendMFACode(this.email).subscribe({\n      next: () => {\n        this.successMessage = 'Verification code sent! Check your email.';\n        setTimeout(() => this.successMessage = '', 3000);\n      },\n      error: error => {\n        this.errorMessage = 'Failed to resend code. Please try again.';\n      }\n    });\n  }\n};\nMfaComponent = __decorate([Component({\n  selector: 'app-mfa',\n  template: `\n    <div class=\"auth-container\">\n      <div class=\"auth-card\">\n        <div class=\"auth-header\">\n          <h1>üîê Verification</h1>\n          <p class=\"subtitle\">We've sent a verification code to your KU email</p>\n        </div>\n\n        <form [formGroup]=\"mfaForm\" (ngSubmit)=\"onSubmit()\" class=\"auth-form\">\n          <div class=\"form-group\">\n            <label for=\"code\">Verification Code</label>\n            <input \n              type=\"text\" \n              id=\"code\"\n              formControlName=\"code\"\n              placeholder=\"Enter 6-digit code\"\n              maxlength=\"6\"\n              [class.error]=\"mfaForm.get('code')?.invalid && mfaForm.get('code')?.touched\"\n            >\n            <div class=\"error-message\" *ngIf=\"mfaForm.get('code')?.invalid && mfaForm.get('code')?.touched\">\n              Verification code is required\n            </div>\n          </div>\n\n          <button \n            type=\"submit\" \n            class=\"btn btn-primary full-width\"\n            [disabled]=\"mfaForm.invalid || isLoading\"\n          >\n            <span *ngIf=\"!isLoading\">Verify</span>\n            <span *ngIf=\"isLoading\">Verifying...</span>\n          </button>\n        </form>\n\n        <div class=\"auth-footer\">\n          <p>Didn't receive the code? <a (click)=\"resendCode()\" class=\"resend-link\">Resend</a></p>\n        </div>\n\n        <div class=\"error-alert\" *ngIf=\"errorMessage\">\n          {{ errorMessage }}\n        </div>\n\n        <div class=\"success-alert\" *ngIf=\"successMessage\">\n          {{ successMessage }}\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .resend-link {\n      color: #667eea;\n      text-decoration: none;\n      font-weight: 500;\n      cursor: pointer;\n    }\n\n    .resend-link:hover {\n      text-decoration: underline;\n    }\n\n    .success-alert {\n      background: #d4edda;\n      color: #155724;\n      padding: 1rem;\n      border-radius: 8px;\n      margin-top: 1rem;\n      border: 1px solid #c3e6cb;\n    }\n  `]\n})], MfaComponent);\nexport { MfaComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}